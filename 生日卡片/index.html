<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>é›»å­ç”Ÿæ—¥å¡ç‰‡</title>
  <style>
    :root{
      --bg:#f4f7fb;
      --accent:#ff6b81;
      --paper:#fffefc;
      --shadow: rgba(17,17,17,0.12);
      --card-w:320px;
      --card-h:200px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--bg),#e9f0ff);font-family:system-ui,-apple-system,"Noto Sans TC", "Microsoft JhengHei", Arial;color:#222;
    }

    /* åŒ…è£¹ */
    .scene{width:100%;max-width:920px;padding:40px;display:flex;gap:40px;align-items:center;justify-content:center;flex-direction:column}

    /* ä¿¡å° */
    .envelope{
      width:360px;height:220px;position:relative;perspective:900px;
    }
    .env-inner{
      width:100%;height:100%;position:absolute;top:0;left:0;transform-style:preserve-3d;transition:filter .4s ease;
    }

    /* èƒŒé¢ */
    .env-back{
      position:absolute;inset:0;border-radius:12px;background:linear-gradient(180deg,#ffd9e0,#fff);box-shadow:0 12px 30px var(--shadow);transform:translateZ(-1px);
    }

    /* ä¿¡å°è“‹ (ä¸‰è§’) */
    .env-flap{
      position:absolute;left:0;right:0;top:0;height:60%;pointer-events:none;transform-origin:top center;transition:transform .8s cubic-bezier(.2,.9,.3,1);
    }
    .env-flap .triangle{
      position:absolute;left:50%;transform:translateX(-50%);width:0;height:0;border-left:180px solid transparent;border-right:180px solid transparent;border-bottom:120px solid var(--accent);border-radius:6px 6px 0 0;box-shadow:0 10px 30px rgba(0,0,0,.12);
    }

    /* é–‰åˆæ™‚çš„å°å£å¸¶ */
    .seal{
      position:absolute;left:50%;top:46%;transform:translate(-50%,-50%);width:72px;height:72px;background:radial-gradient(circle at 30% 30%,#fff8f9,#ffd8df);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:#a0183a;box-shadow:0 6px 18px rgba(160,24,58,.12);transition:transform .6s ease;
    }

    /* å¡ç‰‡ (åœ¨ä¿¡å°å…§) */
    .card{
      width:var(--card-w);height:var(--card-h);background:var(--paper);border-radius:14px;position:absolute;left:50%;top:50%;transform:translate(-50%,-10%) translateZ(-10px);box-shadow:0 10px 30px rgba(16,24,40,0.12);overflow:hidden;padding:18px;transition:transform .9s cubic-bezier(.16,.9,.3,1),opacity .4s ease;
      display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center
    }

    .card h1{margin:0;font-size:20px;color:#222}
    .card p{margin:8px 0 0;font-size:14px;color:#555}

    /* é–‹å•Ÿå¾Œçš„ç‹€æ…‹ */
    .envelope.open .env-flap{transform:rotateX(-180deg);pointer-events:auto}
    .envelope.open .seal{transform:scale(.4) translateY(-10px);opacity:0}
    .envelope.open .card{transform:translate(-50%,-120%) translateZ(0) scale(1.02);opacity:1}
    

    /* åˆå§‹å¡ç‰‡ä½ç½®ï¼ˆè—åœ¨ä¿¡å°è£¡ï¼‰ */
    .card{opacity:0}

    /* å°æç¤ºæŒ‰éˆ• */
    /* .controls{margin-top:18px;display:flex;gap:10px} */
    button{background:#e9f0ff;border:1px solid rgba(233, 240, 255,0);}
    

    /* é£„æµ®çš„æ°£çƒè£é£¾ */
    .decor{position:fixed;right:20px;bottom:20px;display:flex;gap:10px;opacity:.95}
    .balloon{width:48px;height:64px;border-radius:50%/60%;background:linear-gradient(180deg,#ffccd8,#ff9fb5);display:flex;align-items:flex-end;justify-content:center;padding-bottom:6px;box-shadow:0 10px 24px rgba(0,0,0,.12);transform-origin:center;animation:float 3.6s ease-in-out infinite}
    .balloon:nth-child(2){background:linear-gradient(180deg,#ffd9a8,#ffb86b);width:40px;height:54px;animation-delay:.4s}
    .balloon:nth-child(3){background:linear-gradient(180deg,#cfe9ff,#8fc4ff);width:44px;height:60px;animation-delay:.9s}
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-12px)}100%{transform:translateY(0)}}

    /* å°å‹•ç•«ï¼šå¡ç‰‡é–ƒçˆ */
    .card .spark{position:absolute;right:8px;top:8px;font-size:12px;opacity:.8;animation:twinkle 2.6s linear infinite}
    @keyframes twinkle{0%{opacity:.6;transform:scale(.96)}50%{opacity:1;transform:scale(1.06)}100%{opacity:.6;transform:scale(.96)}}

    /* éŸ¿æ‡‰ */
    @media (max-width:420px){.envelope{width:300px;height:180px}.card{width:260px;height:170px}}
  </style>
</head>
<body>
  <div class="scene">
    <div class="envelope" id="envelope" title="é»æ“Šä¿¡å°æ‰“é–‹">
      <div class="env-inner">
        <div class="env-back"></div>

        <div class="env-flap" id="flap">
          <div class="triangle"></div>
        </div>

        <div class="seal" id="seal">â­</div>

        <div class="card" id="card">
          <div class="spark">âœ¨</div>
          <h1 id="toName">ç”Ÿæ—¥å¿«æ¨‚ï¼Œå‘‚äº¦èŒ¹ï¼</h1>
          <p id="message">çªç™¼å¥‡æƒ³æƒ³åˆ°å°±é–‹å§‹åšäº†~ä¸€ç›´åœ¨æƒ³æœ‰æ²’æœ‰å¯ä»¥ç‰¹åˆ¥ä¸€é»çš„ç”Ÿæ—¥å¡ç‰‡å“ˆå“ˆï¼Œæ˜¯èªªé™¤äº†é€™å€‹æˆ‘é‚„æœ‰æº–å‚™ä½ çš„ç”Ÿæ—¥ç¦®ç‰©ï¼ŒæŠ±æ­‰æ²’è¾¦æ³•åƒåŠ ä½ çš„ç”Ÿæ—¥é¤:/  æœ€å¾Œåœ¨ç¥ä½ ä¸€æ¬¡ç”Ÿæ—¥å¿«æ¨‚!<br>å¤©å¤©é–‹å¿ƒ~</p>
        </div>
      </div>
    </div>

    <div class="controls">
      <button id="btnOpen"></button>
      <button id="btnEdit"></button>
      <button id="btnDownload"></button>
    </div>
 
  </div>

  <div class="decor">
    <div class="balloon">ğŸˆ</div>
    <div class="balloon">ğŸˆ</div>
    <div class="balloon">ğŸˆ</div>
  </div>

  <script>
    const env = document.getElementById('envelope');
    const btn = document.getElementById('btnOpen');
    const btnEdit = document.getElementById('btnEdit');
    const btnDownload = document.getElementById('btnDownload');
    const toName = document.getElementById('toName');
    const message = document.getElementById('message');

    // åˆ‡æ›é–‹åˆ
    function toggleEnvelope(){
      env.classList.toggle('open');
    }
    btn.addEventListener('click', toggleEnvelope);
    // ä¹Ÿè®“é»ä¿¡å°æœ¬é«”å¯ä»¥æ‰“é–‹
    env.addEventListener('click', (e)=>{
      // é¿å…é»æŒ‰æŒ‰éˆ•ä¹Ÿè§¸ç™¼
      if(e.target.tagName.toLowerCase()==='button') return;
      toggleEnvelope();
    });

    // è‡ªè¨‚è¨Šæ¯
    //btnEdit.addEventListener('click', ()=>{
      //const name = prompt('è¦é€çµ¦èª°ï¼Ÿ(è¼¸å…¥é¡¯ç¤ºåç¨±ï¼Œç©ºç™½å‰‡ä¿ç•™é è¨­)','');
      //if(name !== null && name.trim()!=='') toName.textContent = `ç”Ÿæ—¥å¿«æ¨‚ï¼Œ${name}ï¼`;
      //const txt = prompt('è¦é¡¯ç¤ºçš„ç¥ç¦èªï¼ˆå¯ç•™ç©ºï¼‰', message.textContent);
      //if(txt !== null) message.textContent = txt;
    //});

    // ä¸‹è¼‰ HTML æª”ï¼ˆä½¿ç”¨ç›®å‰å…§å®¹ï¼‰
    //btnDownload.addEventListener('click', ()=>{
      //const html = `<!doctype html>\n<html lang=\"zh-Hant\">\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n<title>é›»å­ç”Ÿæ—¥å¡ç‰‡</title>\n<style>/* minimal inline styles copied from original */</style>\n<body>\n<div style=\"padding:20px;max-width:640px;margin:auto\">${env.outerHTML}</div>\n</body>\n</html>`;
      //const blob = new Blob([html],{type:'text/html;charset=utf-8'});
      //const url = URL.createObjectURL(blob);
      //const a = document.createElement('a');
      //a.href = url; a.download = 'birthday_card.html'; document.body.appendChild(a); a.click(); a.remove();
      //URL.revokeObjectURL(url);
    //});

    // å¿«æ·éµ O é–‹å•Ÿ/é—œé–‰
    //window.addEventListener('keydown', (e)=>{if(e.key.toLowerCase()==='o')toggleEnvelope()});
  </script>
</body>
</html>